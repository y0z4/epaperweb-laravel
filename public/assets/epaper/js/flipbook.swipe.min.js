/* v 3.4.6
author http://codecanyon.net/user/creativeinteractivemedia/portfolio?ref=creativeinteractivemedia
*/
var FLIPBOOK=FLIPBOOK||{};FLIPBOOK.BookSwipe=function(i,e,s,t){this.options=t,this.singlePage=t.singlePageMode,this.pageWidth=this.options.pageWidth,this.pageHeight=this.options.pageHeight,this.slides=[],this.pagesArr=[],this.leftPage=0,this.rightPage=0,this.prevPageEnabled=!1,this.setRightIndex(0),this.currentSlide=0,this.flipping=!1,this.wrapper=e,this.$wrapper=jQuery(e),this.scroller=i,this.$scroller=jQuery(this.scroller).removeClass("book").addClass("flipbook-carousel-scroller"),this.iscroll=new IScroll(this.wrapper,{snap:!0,snapSpeed:200*this.options.pageFlipDuration,scrollX:!0,scrollY:!1,preventDefault:!1});for(var o=0;o<3;o++){var h=jQuery('<div class="flipbook-carousel-slide"><div class="slide-inner"/></div>"').appendTo(this.$scroller);this.slides.push(h)}var n;this.slides[0].iscroll=new IScroll(this.slides[0][0],{zoom:!0,keepInCenterV:!0,keepInCenterH:!0,scrollbars:!1,preventDefault:!0}),this.slides[2].iscroll=new IScroll(this.slides[2][0],{zoom:!0,keepInCenterV:!0,keepInCenterH:!0,scrollbars:!1,preventDefault:!0}),this.slides[1].iscroll=new IScroll(this.slides[1][0],{scrollbars:!0,zoom:!0,scrollX:!0,scrollY:!0,freeScroll:!0,keepInCenterV:!0,keepInCenterH:!0,scrollbars:!1,preventDefault:!1}),this.slides[1].iscroll.refresh(),this.slides[1].iscroll.on("zoomEnd",function(){l.onZoom(l.options.zoomMin*this.scale/this.options.zoomMin)}),this.slides[1].iscroll.on("zoomStart",function(){l.disableFlip()}),this.slides[0].iscroll.disable(),this.slides[2].iscroll.disable(),this.resizeInnerSlides();for(t.rightToLeft,t.numPages,t.pdfMode,o=0;o<t.numPages;o++)n=new FLIPBOOK.PageSwipe(t,o,t.pages[o].src,t.pages[o].htmlContent),this.pagesArr.push(n),t.loadAllPages&&n.load();var l=this;this.iscroll.on("scrollStart",function(){l.disablePan()}),this.iscroll.on("scrollEnd",function(){l.enablePan();var i=this.currentPage.pageX;if(1==i)return l.flipping=!1,void l.updateVisiblePages();l.singlePage?i>l.currentSlide?l.setRightIndex(l.rightIndex+1):i<l.currentSlide&&l.setRightIndex(l.rightIndex-1):i>l.currentSlide?l.setRightIndex(l.rightIndex+2):i<l.currentSlide&&l.setRightIndex(l.rightIndex-2),l.currentSlide=i,l.updateVisiblePages(),l.flipping=!1}),this.flipEnabled=!0,this.nextEnabled=!0,this.prevEnabled=!0,s.on("toolMove",function(){l.updateTool()}),s.on("toolSelect",function(){l.updateTool()})},FLIPBOOK.BookSwipe.prototype.constructor=FLIPBOOK.BookSwipe,FLIPBOOK.BookSwipe.prototype={goToPage:function(i,e){if(this.enabled&&this.flipEnabled){if((isNaN(i)||i<1)&&(i=1),i>this.pagesArr.length&&(i=this.pagesArr.length),this.singlePage?i--:i%2!=0&&i--,this.resetZoom(),e)return this.setRightIndex(i),void this.updateVisiblePages();this.singlePage?(this.options.rightToLeft&&this.options.oddPages&&i<1&&(i=1),i>this.rightIndex?(this.setSlidePages(this.currentSlide+1,[i]),this.setRightIndex(i-1),this.nextPage(e)):i<this.rightIndex&&(this.setSlidePages(this.currentSlide-1,[i]),this.setRightIndex(i+1),this.prevPage(e))):(this.options.rightToLeft&&this.options.oddPages&&i<2&&(i=2),i>this.rightIndex?i>=this.pagesArr.length?(this.setSlidePages(2,[i-1,i]),this.setRightIndex(i-2),this.goToSlide(2,e)):(this.setSlidePages(this.currentSlide+1,[i-1,i]),this.setRightIndex(i-2),this.nextPage(e)):i<this.rightIndex&&(0==i?(this.setRightIndex(i+2),this.setSlidePages(0,[i]),this.goToSlide(0,e)):(this.setRightIndex(i+2),this.setSlidePages(this.currentSlide-1,[i-1,i]),this.prevPage(e))))}},setRightIndex:function(i){this.rightIndex=i},nextPage:function(i){this.flipEnabled&&2!=this.currentSlide&&(this.flipping=!0,this.goToSlide(this.currentSlide+1,i))},prevPage:function(i){this.flipEnabled&&0!=this.currentSlide&&(this.flipping=!0,this.goToSlide(this.currentSlide-1,i))},enablePrev:function(i){this.prevEnabled=i},enableNext:function(i){this.nextEnabled=i},resetZoom:function(){},setSlidePages:function(i,e){if(!this.slides[i].pages||e.join("")!==this.slides[i].pages.join("")){this.clearSlidePages(i);for(var s=this.slides[i].find(".slide-inner"),t=0;t<e.length;t++){var o=e[t];this.pagesArr[o]&&(s.append(this.pagesArr[o].$wrapper),this.slides[i].pages.push(o))}this.resizeInnerSlides(),this.slides[i].iscroll&&this.slides[i].iscroll.refresh()}},updateTool:function(){switch(this.options.main.tool){case"toolSelect":this.iscroll.disable(),this.slides[1].iscroll.disable(),jQuery(".flipbook-textLayer").css("pointer-events","auto").removeClass(".flipbook-noselect");break;case"toolMove":this.onZoom(this.options.main.zoom),jQuery(".flipbook-textLayer").css("pointer-events","none").addClass(".flipbook-noselect")}},clearSlidePages:function(i){this.slides[i].find(".slide-inner").empty(),this.slides[i].pages=[]},setZoomPages:function(i){if(!this.$zoomScroller.pages||this.$zoomScroller.pages.join("")!=i.join("")){this.$zoomScroller.empty(),this.$zoomScroller.pages=[];for(var e=0;e<i.length;e++){var s=i[e];this.pagesArr[s]&&(this.$zoomScroller.append(this.pagesArr[s].$wrapper),this.$zoomScroller.pages.push(s))}}},resizeZoomPages:function(i,e){var s=this.$wrapper.height()*e,t=500*parseInt(s/500)+500;t<500&&(t=500),t>2e3&&(t=2e3);for(var o=0;o<i.length;o++){var h=i[o];this.pagesArr[h]&&this.pagesArr[h].load()}},getCurrentSlidePages:function(){return this.singlePage?[this.rightIndex]:[this.rightIndex-1,this.rightIndex]},clearSlide:function(i){this.slides[i].empty()},hasPage:function(i,e){},updateVisiblePages:function(){this.singlePage?0==this.rightIndex?(this.setSlidePages(1,[0]),this.setSlidePages(2,[1]),this.clearSlidePages(0),this.iscroll.prevDisabled=!0,this.iscroll.nextDisabled=!1):this.options.rightToLeft&&1==this.rightIndex&&this.options.oddPages?(this.setSlidePages(1,[1]),this.setSlidePages(2,[2]),this.clearSlidePages(0),this.iscroll.prevDisabled=!1,this.iscroll.nextDisabled=!0):this.options.rightToLeft&&this.rightIndex==this.options.numPages-1&&this.options.oddPages?(this.setSlidePages(1,[this.rightIndex]),this.setSlidePages(0,[this.rightIndex-1]),this.setSlidePages(2,[this.rightIndex+1]),this.iscroll.prevDisabled=!1,this.iscroll.nextDisabled=!1):this.rightIndex==this.options.numPages-1?(this.setSlidePages(1,[this.rightIndex]),this.setSlidePages(0,[this.rightIndex-1]),this.clearSlidePages(2),this.iscroll.prevDisabled=!1,this.iscroll.nextDisabled=!0):(this.setSlidePages(1,[this.rightIndex]),this.setSlidePages(0,[this.rightIndex-1]),this.setSlidePages(2,[this.rightIndex+1]),this.iscroll.prevDisabled=!1,this.iscroll.nextDisabled=!1):0==this.rightIndex?(this.setSlidePages(1,[0]),this.setSlidePages(2,[1,2]),this.clearSlidePages(0),this.iscroll.prevDisabled=!0,this.iscroll.nextDisabled=!1):this.options.rightToLeft&&2==this.rightIndex&&this.options.oddPages?(this.setSlidePages(1,[1,2]),this.setSlidePages(2,[3,4]),this.clearSlidePages(0),this.iscroll.prevDisabled=!0,this.iscroll.nextDisabled=!1):this.options.rightToLeft&&this.rightIndex==this.options.numPages-1&&this.options.oddPages?(this.setSlidePages(1,[this.rightIndex-1,this.rightIndex]),this.setSlidePages(0,[this.rightIndex-3,this.rightIndex-2]),this.setSlidePages(2,[this.rightIndex+1,this.rightIndex+2]),this.iscroll.prevDisabled=!1,this.iscroll.nextDisabled=!1):this.rightIndex>=this.options.numPages-1?(this.setSlidePages(1,[this.rightIndex-1,this.rightIndex]),this.setSlidePages(0,[this.rightIndex-3,this.rightIndex-2]),this.clearSlidePages(2),this.iscroll.prevDisabled=!1,this.iscroll.nextDisabled=!0):(this.setSlidePages(1,[this.rightIndex-1,this.rightIndex]),this.setSlidePages(0,[this.rightIndex-3,this.rightIndex-2]),this.setSlidePages(2,[this.rightIndex+1,this.rightIndex+2]),this.iscroll.prevDisabled=!1,this.iscroll.nextDisabled=!1),this.loadVisiblePages(),this.goToSlide(1,!0),this.options.main.turnPageComplete()},loadPage:function(i){this.pagesArr[i]&&this.pagesArr[i].load()},loadVisiblePages:function(){var i=this.options.main;if(this.singlePage){var e=this.pagesArr[this.rightIndex],s=this.pagesArr[this.rightIndex+1],t=this.pagesArr[this.rightIndex-1];e&&e.load(function(){i.setLoadingProgress(1),s&&s.load(),t&&t.load()})}else{var o=this.pagesArr[this.rightIndex],h=this.pagesArr[this.rightIndex-1],n=(s=this.pagesArr[this.rightIndex+1],this.pagesArr[this.rightIndex+2]),l=(t=this.pagesArr[this.rightIndex-2],this.pagesArr[this.rightIndex-3]);h?h.load(function(){o?o.load(function(){i.setLoadingProgress(1),t&&t.load(),l&&l.load(),s&&s.load(),n&&n.load()}):(i.setLoadingProgress(1),t&&t.load(),l&&l.load())}):o&&o.load(function(){i.setLoadingProgress(1),s&&s.load(),n&&n.load()})}},hidePage:function(i){},showPage:function(i){},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0,this.onResize()},resize:function(){},onResize:function(){var i=this.$wrapper.width(),e=this.$wrapper.height();if(this.w=i,this.h=e,0!=i&&0!=e){var s,t=this.pageWidth,o=this.pageHeight,h=2*this.options.zoomMin*t/o>i/e,n=!this.options.singlePageMode&&(!this.options.responsiveView||i>this.options.responsiveViewTreshold||!h),l=n?2*t:t,r=o;this.bw=l,this.bh=r,s=e/i>r/l?r/l*i/this.options.pageTextureSize:e/this.options.pageTextureSize;for(var a=0;a<this.slides.length;a++)this.slides[a].width(i).height(e),this.slides[a].iscroll&&(this.slides[a].iscroll.options.zoomMin=this.options.zoomMin*s,this.slides[a].iscroll.options.zoomMax=this.options.zoomMax*s,this.slides[a].iscroll.refresh());this.$scroller.width(this.$scroller.children().length*i),this.iscroll.refresh(),n&&!this.options.singlePageMode||this.singlePage?n&&!this.options.singlePageMode&&this.singlePage&&(this.rightIndex%2!=0&&this.setRightIndex(this.rightIndex+1),this.singlePage=!1,this.resizeInnerSlides()):(this.rightIndex%2==0&&this.rightIndex>0&&this.setRightIndex(this.rightIndex-1),this.singlePage=!0,this.resizeInnerSlides()),this.updateVisiblePages()}},resizeInnerSlides:function(){for(var i=this.options.pageTextureSize*this.pageWidth/this.pageHeight,e=this.singlePage?i:2*i,s=0;s<3;s++)e=this.slides[s].pages&&1==this.slides[s].pages.length?i:2*i,this.slides[s].find(".slide-inner").width(e)},resizeInnerSlide:function(i){var e=this.options.pageTextureSize*this.pageWidth/this.pageHeight;this.slides[i].pages.length,this.slides[i].find(".slide-inner").width(e)},goToSlide:function(i,e){var s=e?0:300*this.options.pageFlipDuration;this.iscroll.pages.length>0&&this.iscroll.goToPage(i,0,s),e&&(this.currentSlide=i),this.zoomTo(this.options.zoomMin)},getCurrentSlide:function(){return this.currentSlide},zoomIn:function(i,e,s){s&&"mousewheel"===s.type||this.zoomTo(i)},zoomTo:function(i,e,s,t){if(this.enabled){s=s||0,t=t||0,e=e||0;if(i>1&&this.iscroll.disable(),0!=h&&0!=n){var o,h=this.w,n=this.h,l=(this.pageWidth,this.pageHeight,this.bw),r=this.bh;o=n/h>r/l?r/l*i*h/this.options.pageTextureSize:i*n/this.options.pageTextureSize;for(var a=0;a<3;a++)this.slides[a].iscroll&&this.slides[a].iscroll.zoom(o,s,t,e);this.onZoom(i)}}},zoomOut:function(i){this.zoomTo(i)},onZoom:function(i){"toolSelect"==this.options.main.tool?(this.disableFlip(),this.disablePan()):i>1?(this.disableFlip(),this.enablePan()):this.enableFlip(),this.options.main.onZoom(i)},enableAutoplay:function(i){},updateCurrentPage:function(i){},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},onSwipe:function(i,e,s,t,o,h,n){},onPageLoaded:function(i,e){var s=this.options.rightToLeft?this.options.numPages-i-1:i;this.pagesArr[s].onPageLoaded(e,this.options.pages[i].canvas[e],this.options.pages[i].htmlContent),this.updateTool()},onPageUnloaded:function(i,e){var s=this.options.rightToLeft?this.options.numPages-i-1:i;this.pagesArr[s].unload()},disableFlip:function(){this.iscroll.disable()},enableFlip:function(){this.iscroll.enable()},enablePan:function(){this.slides[1].iscroll&&this.slides[1].iscroll.enable()},disablePan:function(){this.slides[1].iscroll&&this.slides[1].iscroll.disable()}},FLIPBOOK.PageSwipe=function(i,e,s,t){this.index=e,this.options=i,this.texture=s,this.html=t,this.index=e,this.$wrapper=jQuery("<div>").addClass("flipbook-carousel-page"),this.wrapper=this.$wrapper[0],this.$inner=jQuery("<div>").appendTo(this.$wrapper).addClass("flipbook-carousel-page-inner"),this.$img=jQuery("<img>"),i.pagePreloader?this.$preloader=jQuery('<img src="'+i.pagePreloader+'" class="flipbook-page-preloader-image">').appendTo(this.$inner):this.$preloader=jQuery('<img src="'+i.assets.spinner+'" class="flipbook-page-preloader">').appendTo(this.$inner);var o=i.pageTextureSize,h=o*i.pageWidth/i.pageHeight;this.setSize(h,o)},FLIPBOOK.PageSwipe.prototype={load:function(i){if(this.loaded)i&&i.call(this);else{this.loaded=!0;var e=this.options.rightToLeft?this.options.numPages-this.index-1:this.index;if(this.options.pdfMode)this.pageSize!=this.options.pageTextureSize?this.options.main.loadPage(e,this.options.pageTextureSize,i):i&&i.call(this);else{var s=this;this.options.main.loadPage(e,this.options.pageTextureSize,function(e){var t=document.createElement("img");t.src=e.image.src,s.$img=jQuery(t).addClass("page-carousel-img");e.image.naturalHeight;var o=e.image.naturalHeight;s.options.pageWidth,s.options.pageHeight;s.$img.appendTo(s.$inner),s.options.doublePage&&s.index>0&&s.index%2==0&&s.$img.css("left","-100%"),s.options.doublePage?0==s.index||s.index==s.options.pages.length-1&&!s.options.oddPages?s.$img.css("width","100%"):s.$img.css("width","200%"):s.$img.css("width","100%"),e.htmlContent&&(s.htmlContent=e.htmlContent[0],e.htmlContent.appendTo(s.$inner),s.updateHtmlContentSize()),i&&i.call(s)})}}},unload:function(){this.loaded=!1,this.pageSize=0,this.$preloader.appendTo(this.$inner)},onPageLoaded:function(i,e,s){if(this.pageSize!=i){this.pageSize=i;this.$inner.empty(),jQuery(e).appendTo(this.$inner),jQuery(s).appendTo(this.$inner),this.htmlContent=s,this.updateHtmlContentSize()}},dispose:function(){this.pageSize&&(this.pageSize=null,this.$inner.empty())},setSize:function(i,e){this.width=i,this.height=e,this.$wrapper.width(i).height(e),this.updateHtmlContentSize()},updateHtmlContentSize:function(){var i=this.height/1e3;this.htmlContent&&this.htmlContent.style&&(this.htmlContent.style.transform="scale("+i+") translateZ(0)",this.options.doublePage&&(this.index%2==0&&this.index>0?this.htmlContent.style.left="-100%":this.htmlContent.style.left="0"))}},FLIPBOOK.SlideSwipe=function(){},FLIPBOOK.SlideSwipe.constructor=FLIPBOOK.SlideSwipe,FLIPBOOK.SlideSwipe.prototype={clear:function(){}};